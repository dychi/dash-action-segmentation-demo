# Document for Dash Plotly
このドキュメントではDashの[demoアプリ](https://dash-action-segmentation.appspot.com/)の作り方を説明していきます。

## 参考にしたサイト
* [Dash Object Detection Explorer](https://github.com/plotly/dash-object-detection)
* [Dash recipes](https://github.com/plotly/dash-recipes)

## 必要なもの
```
certifi==2018.11.29
chardet==3.0.4
Click==7.0
dash==0.32.2
dash-core-components==0.40.3
dash-html-components==0.13.2
dash-renderer==0.16.0
dash-table==3.1.11
decorator==4.3.0
Flask==1.0.2
Flask-Compress==1.4.0
gunicorn==19.9.0
idna==2.8
ipython-genutils==0.2.0
itsdangerous==1.1.0
Jinja2==2.10
jsonschema==2.6.0
jupyter-core==4.4.0
MarkupSafe==1.1.0
nbformat==4.4.0
numpy==1.15.4
pandas==0.23.4
plotly==3.4.2
python-dateutil==2.7.5
pytz==2018.7
requests==2.21.0
retrying==1.3.3
six==1.12.0
traitlets==4.3.2
urllib3==1.24.1
Werkzeug==0.14.1
```

## ディレクトリ構造
```
.
├── README.md
├── app.py
├── flex.app.yaml
├── annotations
│   ├── match_7.csv
│   ├── match_8.csv
│   ├── match_9.csv
│   ├── match_10.csv
├── imgaes
│   ├── match_7/
│   ├── match_8/
│   ├── match_9/
│   ├── match_10/
├── requirements.txt
└── standard.app.yaml
```

## コードの解説
ここからはapp.pyの詳細について解説していきます。
### 処理の概要
まずは全体の処理の流れを見ていきます。

1. Dash から Flask のインスタンスにアクセス
2. html likeなスタイルでページ内の配置を指定
3. データの読み込み
4. static なデータを読み込むために path の指定
5. @app.callback でインタラクティブなグラフの配置を指定
6. State, Input によるグラフの変化を関数内で定義し返す
7. グラフの描画スタイルは plotly のスタイル
8. css の path を指定
9. server をローカルで起動

### 

csv 

| Top1_score          | Frames         | class_str_label | class_str_top1 | n             | smpt           | smpb          | rtpt         | rtpb          | bhpt          | bhpb           | fhpt           | fhpb           | lbpt          | lbpb           | spt            | spb            |
|---------------------|----------------|-----------------|----------------|---------------|----------------|---------------|--------------|---------------|---------------|----------------|----------------|----------------|---------------|----------------|----------------|----------------|
| 0.5331301093101501  | img_009549.jpg | spb             | spb            | 0.090465754   | 9.656445e-05   | 0.001097708   | 0.03143407   | 0.004162653   | 0.00018237281 | 0.00044826482  | 4.8154732e-05  | 2.5673266e-05  | 0.0032581198  | 0.0016761322   | 0.3339744      | 0.5331301      |
| 0.5481389164924622  | img_009550.jpg | spb             | spb            | 0.089183785   | 2.7546675e-05  | 0.0006168233  | 0.017062714  | 0.0027068239  | 7.7470446e-05 | 0.0004935579   | 1.8993607e-05  | 2.2912322e-05  | 0.0016966339  | 0.001952591    | 0.3380012      | 0.5481389      |
| 0.5484710931777954  | img_009551.jpg | spb             | spb            | 0.07672995    | 2.1207929e-05  | 0.00046188603 | 0.014227357  | 0.002111698   | 5.750537e-05  | 0.0003772568   | 1.4450693e-05  | 1.7394166e-05  | 0.0014095443  | 0.001609176    | 0.3544914      | 0.5484711      |
| 0.5993022322654724  | img_009552.jpg | spb             | spb            | 0.057722352   | 2.0250582e-05  | 0.00030638766 | 0.012893226  | 0.0017050059  | 4.5520985e-05 | 0.00021573818  | 1.3501122e-05  | 1.195791e-05   | 0.0011319482  | 0.00093692733  | 0.325695       | 0.59930223     |
| 0.6349471807479858  | img_009553.jpg | spb             | spb            | 0.06099716    | 2.7607226e-05  | 0.0003224706  | 0.014160681  | 0.0018254592  | 5.8062556e-05 | 0.00022118156  | 1.8048353e-05  | 1.4626823e-05  | 0.0012549176  | 0.00094897544  | 0.2852036      | 0.6349472      |

